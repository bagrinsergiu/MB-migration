# TASK-003: Проверка и добавление мобильных margin'ов

## Статус: ⏳ Ожидает выполнения

**Дата создания:** 2025-01-26  
**Приоритет:** Средний  
**Зависит от:** TASK-002

---

## Описание задачи

Проверить, нужно ли извлекать и применять мобильные margin'ы из DOM для секций. В текущей реализации мобильные margin'ы не извлекаются из DOM и могут быть установлены только через `additionalOptions`.

---

## Текущая реализация

### Что есть сейчас

1. **Desktop margin'ы:** Извлекаются и применяются ✅
2. **Mobile margin'ы:** НЕ извлекаются, могут быть установлены через `additionalOptions` ⚠️
3. **Mobile padding'ы:** Извлекаются и применяются ✅ (исправлено в TASK-001)

### Примеры использования mobileMargin

В коде есть примеры использования `mobileMargin`:
- `EventDetailsPageLayout.php` - устанавливает `mobileMarginTop: 10`
- `SermonDetailsPageLayout.php` - устанавливает `mobileMarginTop: 10`
- `setTopPaddingOfTheFirstElement()` - устанавливает `mobileMarginTop` через `additionalOptions`

---

## Что нужно сделать

### Шаг 1: Проверить, есть ли мобильные margin'ы в исходных сайтах

**Что делать:**
1. Открыть реальные страницы в браузере
2. Переключиться в mobile режим (375px width)
3. Проверить computed styles для секций
4. Проверить, есть ли мобильные margin'ы в CSS

**Ожидаемый результат:**
- Определено, есть ли мобильные margin'ы в исходных сайтах
- Если есть, задокументированы их значения

**Критерии готовности:**
- [ ] Проверено на 2+ реальных страницах
- [ ] Проверено на разных размерах экрана
- [ ] Результаты задокументированы

---

### Шаг 2: Определить, нужно ли извлекать мобильные margin'ы

**Что делать:**
1. Проанализировать результаты шага 1
2. Определить, есть ли в исходных сайтах мобильные margin'ы
3. Если есть, определить, нужно ли их извлекать и применять

**Ожидаемый результат:**
- Принято решение: нужно ли извлекать мобильные margin'ы
- Обоснование решения задокументировано

**Критерии готовности:**
- [ ] Решение принято
- [ ] Обоснование задокументировано

---

### Шаг 3: Если нужно, добавить извлечение мобильных margin'ов

**Что делать:**
1. Изучить, как извлекаются мобильные стили в браузере
2. Добавить извлечение мобильных margin'ов в метод `getSectionStyles()` или создать отдельный метод
3. Убедиться, что извлечение работает правильно

**Ожидаемый результат:**
- Мобильные margin'ы извлекаются из DOM (если нужно)

**Критерии готовности:**
- [ ] Код добавлен
- [ ] Протестировано на реальных страницах
- [ ] Линтер не показывает ошибок

---

### Шаг 4: Если нужно, добавить применение мобильных margin'ов

**Что делать:**
1. Добавить применение мобильных margin'ов в метод `handleSectionStyles()`
2. Использовать логику, аналогичную мобильным padding'ам:
   - Сначала проверять `additionalOptions`
   - Затем использовать значения из DOM
   - Затем использовать 0

**Ожидаемый результат:**
- Мобильные margin'ы применяются к секциям (если нужно)

**Критерии готовности:**
- [ ] Код добавлен
- [ ] Протестировано
- [ ] Линтер не показывает ошибок

---

## Пример реализации (если нужно)

```php
// В handleSectionStyles() после строки 148
->set_mobileMarginType('ungrouped')
->set_mobileMargin((int)($additionalOptions['mobileMargin'] ?? $sectionStyles['mobile-margin-top'] ?? 0))
->set_mobileMarginSuffix('px')
->set_mobileMarginTop((int)($additionalOptions['mobileMarginTop'] ?? $sectionStyles['mobile-margin-top'] ?? 0))
->set_mobileMarginTopSuffix('px')
->set_mobileMarginRight((int)($additionalOptions['mobileMarginRight'] ?? $sectionStyles['mobile-margin-right'] ?? 0))
->set_mobileMarginRightSuffix('px')
->set_mobileMarginBottom((int)($additionalOptions['mobileMarginBottom'] ?? $sectionStyles['mobile-margin-bottom'] ?? 0))
->set_mobileMarginBottomSuffix('px')
->set_mobileMarginLeft((int)($additionalOptions['mobileMarginLeft'] ?? $sectionStyles['mobile-margin-left'] ?? 0))
->set_mobileMarginLeftSuffix('px');
```

**Примечание:** Нужно сначала проверить, как извлекать мобильные стили из браузера.

---

## Результаты

**Статус:** ⏳ Ожидает выполнения

**Решение:** TBD

**Найденные проблемы:** TBD

**Рекомендации:** TBD

---

## Следующие шаги

После выполнения задачи:
1. Если мобильные margin'ы добавлены - обновить документацию
2. Перейти к TASK-004 (tablet margin'ы)

---

## Связанные файлы

- `../analysis/issues-found.md` - Проблема #2
- `../analysis/real-pages-analysis.md` - Анализ реальных страниц
- `TASK-002-desktop-margins-check.md` - Проверка desktop margin'ов
