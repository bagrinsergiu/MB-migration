# –≠—Ç–∞–ø 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ CI/CD

## üìã –û–±–∑–æ—Ä —ç—Ç–∞–ø–∞

**–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: 1 –Ω–µ–¥–µ–ª—è  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –°–†–ï–î–ù–ò–ô  
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: –≠—Ç–∞–ø 3 (—Ç–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–∞–ø–∏—Å–∞–Ω—ã)

## üéØ –¶–µ–ª—å —ç—Ç–∞–ø–∞

–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∫–æ–º–º–∏—Ç–µ –∏ pull request, –æ–±–µ—Å–ø–µ—á–∏–≤ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞.

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞

–°–µ–π—á–∞—Å —Ç–µ—Å—Ç—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –≤—Ä—É—á–Ω—É—é, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫:
- –ö–æ–¥ —Å –æ—à–∏–±–∫–∞–º–∏ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- –†–µ–≥—Ä–µ—Å—Å–∏–∏ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞—é—Ç—Å—è –ø–æ–∑–¥–Ω–æ
- –ù–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

–ù–∞—Å—Ç—Ä–æ–∏—Ç—å CI/CD pipeline, –∫–æ—Ç–æ—Ä—ã–π:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç —Ç–µ—Å—Ç—ã –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∫–æ–º–º–∏—Ç–µ
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ–¥ –ø–µ—Ä–µ–¥ merge
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç—á–µ—Ç—ã –æ –ø–æ–∫—Ä—ã—Ç–∏–∏
- –£–≤–µ–¥–æ–º–ª—è–µ—Ç –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö

---

## üìù –ó–∞–¥–∞—á–∏ —ç—Ç–∞–ø–∞

### –ó–∞–¥–∞—á–∞ 4.1: –í—ã–±—Ä–∞—Ç—å –ø–ª–∞—Ç—Ñ–æ—Ä–º—É CI/CD

**–í—Ä–µ–º—è**: 30 –º–∏–Ω—É—Ç

**–í–∞—Ä–∏–∞–Ω—Ç—ã**:
- **GitHub Actions** (–µ—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç –Ω–∞ GitHub) - —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è
- **GitLab CI** (–µ—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç –Ω–∞ GitLab)
- **Jenkins** (–µ—Å–ª–∏ –Ω—É–∂–µ–Ω self-hosted)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: GitHub Actions (–ø—Ä–æ—â–µ –≤—Å–µ–≥–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å)

**–ß–µ–∫–ª–∏—Å—Ç**:
- [ ] –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –≤—ã–±—Ä–∞–Ω–∞
- [ ] –î–æ—Å—Ç—É–ø –∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º –µ—Å—Ç—å

---

### –ó–∞–¥–∞—á–∞ 4.2: –°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—ã–π workflow –¥–ª—è unit —Ç–µ—Å—Ç–æ–≤

**–í—Ä–µ–º—è**: 2-3 —á–∞—Å–∞  
**–§–∞–π–ª**: `.github/workflows/tests.yml` (–¥–ª—è GitHub Actions)

**–ß—Ç–æ —Å–¥–µ–ª–∞—Ç—å**:
1. –°–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `.github/workflows/`
2. –°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—ã–π workflow —Ñ–∞–π–ª
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∑–∞–ø—É—Å–∫ unit —Ç–µ—Å—Ç–æ–≤

**–ü—Ä–∏–º–µ—Ä –¥–ª—è GitHub Actions**:
```yaml
name: Tests

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main, develop ]

jobs:
  unit-tests:
    name: Unit Tests
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v3
      
      - name: Setup PHP
        uses: shivammathur/setup-php@v2
        with:
          php-version: '7.4'
          extensions: pdo, pdo_mysql, pdo_pgsql, dom, curl, json, mbstring, gd
          coverage: xdebug
      
      - name: Install dependencies
        run: composer install --prefer-dist --no-progress
      
      - name: Run unit tests
        run: vendor/bin/phpunit tests/Unit --coverage-clover=coverage.xml
      
      - name: Upload coverage
        uses: codecov/codecov-action@v3
        with:
          file: ./coverage.xml
          flags: unit
```

**–ß–µ–∫–ª–∏—Å—Ç**:
- [ ] Workflow —Ñ–∞–π–ª —Å–æ–∑–¥–∞–Ω
- [ ] Unit —Ç–µ—Å—Ç—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è
- [ ] –ü–æ–∫—Ä—ã—Ç–∏–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è

---

### –ó–∞–¥–∞—á–∞ 4.3: –î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –≤ CI

**–í—Ä–µ–º—è**: 2-3 —á–∞—Å–∞  
**–§–∞–π–ª**: –û–±–Ω–æ–≤–∏—Ç—å `.github/workflows/tests.yml`

**–ß—Ç–æ —Å–¥–µ–ª–∞—Ç—å**:
1. –î–æ–±–∞–≤–∏—Ç—å job –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –ë–î (MySQL, PostgreSQL)
3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ —Ç–µ—Å—Ç–∞–º–∏

**–ü—Ä–∏–º–µ—Ä**:
```yaml
integration-tests:
  name: Integration Tests
  runs-on: ubuntu-latest
  
  services:
    mysql:
      image: mysql:8.0
      env:
        MYSQL_ROOT_PASSWORD: test
        MYSQL_DATABASE: test_migration
      ports:
        - 3306:3306
      options: >-
        --health-cmd="mysqladmin ping"
        --health-interval=10s
        --health-timeout=5s
        --health-retries=3
    
    postgres:
      image: postgres:14
      env:
        POSTGRES_DB: test_mb
        POSTGRES_USER: test
        POSTGRES_PASSWORD: test
      ports:
        - 5432:5432
      options: >-
        --health-cmd="pg_isready"
        --health-interval=10s
        --health-timeout=5s
        --health-retries=3
  
  steps:
    - name: Checkout code
      uses: actions/checkout@v3
    
    - name: Setup PHP
      uses: shivammathur/setup-php@v2
      with:
        php-version: '7.4'
        extensions: pdo, pdo_mysql, pdo_pgsql
    
    - name: Install dependencies
      run: composer install --prefer-dist --no-progress
    
    - name: Run database migrations
      run: |
        php vendor/bin/phinx migrate -e testing
      env:
        MG_DB_HOST: 127.0.0.1
        MG_DB_NAME: test_migration
        MG_DB_USER: root
        MG_DB_PASS: test
        MB_DB_HOST: 127.0.0.1
        MB_DB_NAME: test_mb
        MB_DB_USER: test
        MB_DB_PASS: test
    
    - name: Run integration tests
      run: vendor/bin/phpunit tests/Integration
      env:
        MG_DB_HOST: 127.0.0.1
        MG_DB_NAME: test_migration
        MG_DB_USER: root
        MG_DB_PASS: test
```

**–ß–µ–∫–ª–∏—Å—Ç**:
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã
- [ ] –ë–î –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [ ] –ú–∏–≥—Ä–∞—Ü–∏–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è
- [ ] –¢–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç

---

### –ó–∞–¥–∞—á–∞ 4.4: –î–æ–±–∞–≤–∏—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑

**–í—Ä–µ–º—è**: 1-2 —á–∞—Å–∞  
**–§–∞–π–ª**: –û–±–Ω–æ–≤–∏—Ç—å `.github/workflows/tests.yml`

**–ß—Ç–æ —Å–¥–µ–ª–∞—Ç—å**:
1. –î–æ–±–∞–≤–∏—Ç—å job –¥–ª—è PHPStan
2. –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Å—Ç–∏–ª—è –∫–æ–¥–∞ (PHP CS Fixer)

**–ü—Ä–∏–º–µ—Ä**:
```yaml
code-quality:
  name: Code Quality
  runs-on: ubuntu-latest
  
  steps:
    - name: Checkout code
      uses: actions/checkout@v3
    
    - name: Setup PHP
      uses: shivammathur/setup-php@v2
      with:
        php-version: '7.4'
    
    - name: Install dependencies
      run: composer install --prefer-dist --no-progress
    
    - name: Run PHPStan
      run: vendor/bin/phpstan analyse --level=5 lib/ dashboard/
    
    - name: Check code style
      run: vendor/bin/php-cs-fixer fix --dry-run --diff
```

**–ß–µ–∫–ª–∏—Å—Ç**:
- [ ] PHPStan –¥–æ–±–∞–≤–ª–µ–Ω
- [ ] PHP CS Fixer –¥–æ–±–∞–≤–ª–µ–Ω
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç

---

### –ó–∞–¥–∞—á–∞ 4.5: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å E2E —Ç–µ—Å—Ç—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–í—Ä–µ–º—è**: 3-4 —á–∞—Å–∞  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –ù–ò–ó–ö–ò–ô

**–ß—Ç–æ —Å–¥–µ–ª–∞—Ç—å**:
1. –î–æ–±–∞–≤–∏—Ç—å job –¥–ª—è E2E —Ç–µ—Å—Ç–æ–≤
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Chrome –≤ CI
3. –ó–∞–ø—É—Å—Ç–∏—Ç—å E2E —Ç–µ—Å—Ç—ã

**–ü—Ä–∏–º–µ—Ä**:
```yaml
e2e-tests:
  name: E2E Tests
  runs-on: ubuntu-latest
  
  steps:
    - name: Checkout code
      uses: actions/checkout@v3
    
    - name: Setup PHP
      uses: shivammathur/setup-php@v2
      with:
        php-version: '7.4'
    
    - name: Install Chrome
      run: |
        sudo apt-get update
        sudo apt-get install -y google-chrome-stable
    
    - name: Install dependencies
      run: composer install --prefer-dist --no-progress
    
    - name: Run E2E tests
      run: vendor/bin/phpunit tests/E2E
```

**–ß–µ–∫–ª–∏—Å—Ç**:
- [ ] E2E —Ç–µ—Å—Ç—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã
- [ ] Chrome –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] –¢–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç

---

### –ó–∞–¥–∞—á–∞ 4.6: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

**–í—Ä–µ–º—è**: 1 —á–∞—Å

**–ß—Ç–æ —Å–¥–µ–ª–∞—Ç—å**:
1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø–∞–¥–µ–Ω–∏–∏ —Ç–µ—Å—Ç–æ–≤
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø–æ–∫—Ä—ã—Ç–∏–∏

**–í–∞—Ä–∏–∞–Ω—Ç—ã**:
- Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- Slack/Discord –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- GitHub –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏

**–ß–µ–∫–ª–∏—Å—Ç**:
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [ ] –†–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

### –ó–∞–¥–∞—á–∞ 4.7: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å pre-commit hooks

**–í—Ä–µ–º—è**: 1-2 —á–∞—Å–∞  
**–§–∞–π–ª**: `.git/hooks/pre-commit`

**–ß—Ç–æ —Å–¥–µ–ª–∞—Ç—å**:
1. –°–æ–∑–¥–∞—Ç—å pre-commit hook
2. –ó–∞–ø—É—Å–∫–∞—Ç—å –±—ã—Å—Ç—Ä—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º
3. –ë–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–º–∏—Ç –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

**–ü—Ä–∏–º–µ—Ä**:
```bash
#!/bin/bash
# .git/hooks/pre-commit

echo "Running pre-commit checks..."

# –ë—ã—Å—Ç—Ä—ã–µ unit —Ç–µ—Å—Ç—ã
vendor/bin/phpunit tests/Unit --stop-on-failure

if [ $? -ne 0 ]; then
    echo "Unit tests failed. Commit aborted."
    exit 1
fi

# PHPStan
vendor/bin/phpstan analyse --level=5 lib/ --no-progress

if [ $? -ne 0 ]; then
    echo "PHPStan found issues. Commit aborted."
    exit 1
fi

echo "Pre-commit checks passed!"
exit 0
```

**–°–¥–µ–ª–∞—Ç—å –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º**:
```bash
chmod +x .git/hooks/pre-commit
```

**–ß–µ–∫–ª–∏—Å—Ç**:
- [ ] Pre-commit hook —Å–æ–∑–¥–∞–Ω
- [ ] –†–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ë–ª–æ–∫–∏—Ä—É–µ—Ç –∫–æ–º–º–∏—Ç—ã —Å –æ—à–∏–±–∫–∞–º–∏

---

### –ó–∞–¥–∞—á–∞ 4.8: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å branch protection rules

**–í—Ä–µ–º—è**: 30 –º–∏–Ω—É—Ç  
**–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞**: GitHub/GitLab –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

**–ß—Ç–æ —Å–¥–µ–ª–∞—Ç—å**:
1. –í–∫–ª—é—á–∏—Ç—å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤ –ø–µ—Ä–µ–¥ merge
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å required status checks
3. –ó–∞–ø—Ä–µ—Ç–∏—Ç—å force push –≤ main

**–ù–∞—Å—Ç—Ä–æ–π–∫–∏ GitHub**:
- Settings ‚Üí Branches ‚Üí Add rule
- Require status checks to pass before merging
- –í—ã–±—Ä–∞—Ç—å: unit-tests, integration-tests, code-quality

**–ß–µ–∫–ª–∏—Å—Ç**:
- [ ] Branch protection –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
- [ ] –¢–µ—Å—Ç—ã —Ç—Ä–µ–±—É—é—Ç—Å—è –ø–µ—Ä–µ–¥ merge
- [ ] Force push –∑–∞–ø—Ä–µ—â–µ–Ω

---

### –ó–∞–¥–∞—á–∞ 4.9: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å badges –≤ README

**–í—Ä–µ–º—è**: 30 –º–∏–Ω—É—Ç  
**–§–∞–π–ª**: `README.md`

**–ß—Ç–æ —Å–¥–µ–ª–∞—Ç—å**:
1. –î–æ–±–∞–≤–∏—Ç—å badges –¥–ª—è —Å—Ç–∞—Ç—É—Å–∞ —Ç–µ—Å—Ç–æ–≤
2. –î–æ–±–∞–≤–∏—Ç—å badge –¥–ª—è –ø–æ–∫—Ä—ã—Ç–∏—è –∫–æ–¥–∞
3. –û–±–Ω–æ–≤–∏—Ç—å README

**–ü—Ä–∏–º–µ—Ä**:
```markdown
# MB-Migration

[![Tests](https://github.com/user/MB-migration/workflows/Tests/badge.svg)](https://github.com/user/MB-migration/actions)
[![Coverage](https://codecov.io/gh/user/MB-migration/branch/main/graph/badge.svg)](https://codecov.io/gh/user/MB-migration)
[![PHPStan](https://img.shields.io/badge/PHPStan-level%205-brightgreen.svg)](https://github.com/phpstan/phpstan)
```

**–ß–µ–∫–ª–∏—Å—Ç**:
- [ ] Badges –¥–æ–±–∞–≤–ª–µ–Ω—ã
- [ ] –†–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

### –ó–∞–¥–∞—á–∞ 4.10: –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å CI/CD –ø—Ä–æ—Ü–µ—Å—Å

**–í—Ä–µ–º—è**: 1 —á–∞—Å  
**–§–∞–π–ª**: `docs/CI_CD.md` –∏–ª–∏ –æ–±–Ω–æ–≤–∏—Ç—å `README.md`

**–ß—Ç–æ –æ–ø–∏—Å–∞—Ç—å**:
1. –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç CI/CD
2. –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è
3. –ö–∞–∫ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—ã
4. –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

**–ß–µ–∫–ª–∏—Å—Ç**:
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞
- [ ] –ü—Ä–æ—Ü–µ—Å—Å –æ–ø–∏—Å–∞–Ω
- [ ] –ü—Ä–∏–º–µ—Ä—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã

---

## üìä –ö—Ä–∏—Ç–µ—Ä–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —ç—Ç–∞–ø–∞

- [ ] CI/CD pipeline –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] Unit —Ç–µ—Å—Ç—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- [ ] –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] Pre-commit hooks —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] Branch protection –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞

---

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### –¢–µ—Å—Ç 1: Push –≤ feature branch
```bash
git checkout -b test-ci
# –°–¥–µ–ª–∞—Ç—å –Ω–µ–±–æ–ª—å—à–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ
git commit -m "Test CI"
git push origin test-ci
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: 
- CI –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –¢–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- –°—Ç–∞—Ç—É—Å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ PR

### –¢–µ—Å—Ç 2: –°–ª–æ–º–∞—Ç—å —Ç–µ—Å—Ç
```bash
# –ù–∞–º–µ—Ä–µ–Ω–Ω–æ —Å–ª–æ–º–∞—Ç—å —Ç–µ—Å—Ç
# –°–¥–µ–ª–∞—Ç—å –∫–æ–º–º–∏—Ç
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:
- CI –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É
- Merge –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ

### –¢–µ—Å—Ç 3: Pre-commit hook
```bash
# –ù–∞–º–µ—Ä–µ–Ω–Ω–æ —Å–ª–æ–º–∞—Ç—å –∫–æ–¥
git add .
git commit -m "Test"
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:
- Pre-commit hook –±–ª–æ–∫–∏—Ä—É–µ—Ç –∫–æ–º–º–∏—Ç
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –æ—à–∏–±–∫–∞

---

## üìö –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞

–°–º. [examples/stage-4/](../examples/stage-4/) –¥–ª—è:
- –ü–æ–ª–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã workflow —Ñ–∞–π–ª–æ–≤
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º
- –ü—Ä–∏–º–µ—Ä—ã hooks

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–ù–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É** - pre-commit hooks –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –±—ã—Å—Ç—Ä—ã–º–∏
2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫—ç—à** - –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è
3. **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ jobs** - –∑–∞–ø—É—Å–∫–∞—Ç—å —Ç–µ—Å—Ç—ã –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
4. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –¥–æ–ª–∂–Ω—ã —Å–ø–∞–º–∏—Ç—å** - —Ç–æ–ª—å–∫–æ –≤–∞–∂–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è

---

## üêõ –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ü—Ä–æ–±–ª–µ–º–∞: CI –º–µ–¥–ª–µ–Ω–Ω—ã–π
**–†–µ—à–µ–Ω–∏–µ**: 
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫—ç—à –¥–ª—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –ó–∞–ø—É—Å–∫–∞—Ç—å —Ç–µ—Å—Ç—ã –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç–µ—Å—Ç—ã

### –ü—Ä–æ–±–ª–µ–º–∞: –¢–µ—Å—Ç—ã –ø–∞–¥–∞—é—Ç –≤ CI, –Ω–æ —Ä–∞–±–æ—Ç–∞—é—Ç –ª–æ–∫–∞–ª—å–Ω–æ
**–†–µ—à–µ–Ω–∏–µ**: 
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏–∏ PHP/extensions
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å docker –¥–ª—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏

### –ü—Ä–æ–±–ª–µ–º–∞: Pre-commit hook —Å–ª–∏—à–∫–æ–º —Å—Ç—Ä–æ–≥–∏–π
**–†–µ—à–µ–Ω–∏–µ**: 
- –û—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
- –û—Å—Ç–∞–ª—å–Ω–æ–µ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –≤ CI

---

## üìÖ –ü—Ä–∏–º–µ—Ä–Ω—ã–π –ø–ª–∞–Ω –ø–æ –¥–Ω—è–º

**–î–µ–Ω—å 1**:
- –ó–∞–¥–∞—á–∏ 4.1-4.2 (–≤—ã–±–æ—Ä –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –∏ –±–∞–∑–æ–≤—ã–π workflow)

**–î–µ–Ω—å 2**:
- –ó–∞–¥–∞—á–∏ 4.3-4.4 (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –∏ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑)

**–î–µ–Ω—å 3**:
- –ó–∞–¥–∞—á–∏ 4.5-4.6 (E2E —Ç–µ—Å—Ç—ã –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è)

**–î–µ–Ω—å 4**:
- –ó–∞–¥–∞—á–∏ 4.7-4.8 (pre-commit hooks –∏ branch protection)

**–î–µ–Ω—å 5**:
- –ó–∞–¥–∞—á–∏ 4.9-4.10 (badges –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞

---

**–°–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø**: [–≠—Ç–∞–ø 5: –ú–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥](./stage-5-metrics.md)
