"use strict";(()=>{function S(n,r,i){n=Math.min(255,Math.max(0,Math.round(n))),r=Math.min(255,Math.max(0,Math.round(r))),i=Math.min(255,Math.max(0,Math.round(i)));let s=n.toString(16).padStart(2,"0"),l=r.toString(16).padStart(2,"0"),e=i.toString(16).padStart(2,"0");return`#${s}${l}${e}`.toUpperCase()}var p=n=>{let r=n.slice(4,-1).split(",").map(i=>parseInt(i.trim()));if(r.length===3)return S(r[0],r[1],r[2])};var h=n=>{let r=window.getComputedStyle(n),i={};return Object.values(r).forEach(s=>{i[s]=r.getPropertyValue(s)}),i};var f=n=>n.charAt(0).toUpperCase()+n.slice(1);var c=n=>{let r=n.split("-");for(let i=1;i<r.length;i++)r[i]=f(r[i]);return r.join("")};var N={"font-family":void 0,"font-family-type":"uploaded","font-weight":void 0,"font-size":void 0,"line-height":void 0,"letter-spacing":void 0,colorHex:void 0,colorOpacity:1,activeColorHex:void 0,activeColorOpacity:void 0},v=n=>{let{node:r,families:i,defaultFamily:s}=n,l=h(r),e={};return Object.keys(N).forEach(t=>{switch(t){case"font-family":{let a=l[t].replace(/['"\,]/g,"").replace(/\s/g,"_").toLocaleLowerCase();i[a]?e[c(t)]=i[a]:e[c(t)]=s;break}case"font-family-type":{e[c(t)]="upload";break}case"line-height":{e[c(t)]=1;break}case"font-size":{e[c(t)]=parseInt(l[t]);break}case"letter-spacing":{let o=l[t];if(o==="normal")e[c(t)]=0;else{let a=o.replace(/px/g,"").trim();e[c(t)]=+a}break}case"colorHex":{let o=p(l.color);e[c(t)]=o??"#000000";break}case"colorOpacity":break;default:e[c(t)]=l[t]}}),e};var b=(n,r)=>Object.entries(n).reduce((i,[s,l])=>{let e=r+f(s);return s.startsWith("active")&&(e=`active${f(r)}${s.replace("active","")}`),{...i,[e]:l}},{});(()=>{let n={},r=e=>{let{nav:t,selector:o}=e,a=t.children[0],u={};if(!a)return n.menu={message:`Navigation don't have ul in ${o}`},u;let m=a.querySelector("li");if(!m)return n["menu li"]={message:`Navigation don't have ul > li in ${o}`},u;let d=a.querySelector("li > a");if(!d)return n["menu li a"]={message:`Navigation don't have ul > li > a in ${o}`},u;let y=window.getComputedStyle(m),g=parseInt(y.paddingLeft);return u=v({node:d,families:e.families,defaultFamily:e.defaultFamily}),{...u,itemPadding:isNaN(g)?10:g}},i=e=>{let{subNav:t,selector:o}=e,a={};if(!t.querySelector("li"))return n["submenu li"]={message:`Navigation don't have ul > li in ${o}`},a;let m=t.querySelector("li > a");if(!m)return n["submenu li a"]={message:`Navigation don't have ul > li > a in ${o}`},a;let d=v({node:m,families:e.families,defaultFamily:e.defaultFamily}),y=b(d,"subMenu"),g=window.getComputedStyle(t),M=p(g.backgroundColor)??"#ffffff";return{...y,subMenuBgColorOpacity:1,subMenuBgColorHex:M}},s=e=>{let{subNav:t}=e,o=r(e);if(t){let a=i({...e,subNav:t});o={...o,...a}}return o},l=e=>{let t=document.querySelector(e.selector);if(!t)return JSON.stringify({error:`Element with selector ${e.selector} not found`,warns:n});let o=t;if(!o)return JSON.stringify({error:`Element with selector ${e.selector} has no header`,warns:n});let a=o.querySelector("#main-navigation");if(!a)return JSON.stringify({error:`Element with selector ${e.selector} has no nav`,warns:n});let u=o.querySelector(".sub-navigation")??void 0,m={nav:a,subNav:u,selector:e.selector,families:e.families,defaultFamily:e.defaultFamily};return JSON.stringify({menu:s(m),warns:n})};try{let e={selector:"{{selector}}",families:JSON.parse("{{families}}"),defaultFamily:"{{defaultFamily}}"};return l(e)}catch(e){let o={selector:".my-div",families:{lato:"uid_for_lato",roboto:"uid_for_roboto"},defaultFamily:"lato"};throw new Error(JSON.stringify({error:`Invalid JSON ${e}`,details:`Must be: ${JSON.stringify(o)}`}))}})();})();
