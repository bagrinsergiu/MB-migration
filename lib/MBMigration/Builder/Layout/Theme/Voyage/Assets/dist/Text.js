"use strict";var scripts;(scripts||={}).Text=(()=>{var b=Object.defineProperty;var G=Object.getOwnPropertyDescriptor;var X=Object.getOwnPropertyNames;var K=Object.prototype.hasOwnProperty;var Q=(t,e)=>{for(var r in e)b(t,r,{get:e[r],enumerable:!0})},Y=(t,e,r,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of X(e))!K.call(t,n)&&n!==r&&b(t,n,{get:()=>e[n],enumerable:!(o=G(e,n))||o.enumerable});return t};var Z=t=>Y(b({},"__esModule",{value:!0}),t);var pt={};Q(pt,{default:()=>ft});function O(t){if(t==="normal")return"0";let e=t.replace(/px/g,"").trim(),[r,o="0"]=e.split("."),n=+r;return n<0||Object.is(n,-0)?"m_"+-n+"_"+o[0]:n+"_"+o[0]}function C(t,e){if(t==="normal")return"1_2";let r=t.replace("px",""),o=Number(r)/Number(e),[n,i=""]=o.toString().split(".");return i?n+"_"+i[0]:n}var tt=t=>{switch(typeof t){case"string":{let e=t!==""?Number(t):NaN;return isNaN(e)?void 0:e}case"number":return isNaN(t)?void 0:t;default:return}},k=t=>typeof t=="string"?parseInt(t):tt(t);var H=(t,e,r)=>{let o=[];return Object.entries(t).forEach(([n,i])=>{switch(n){case"font-size":{let d=Math.round(k(i)??1);o.push(`brz-fs-lg-${d}`);break}case"font-family":let s=`${i}`.replace(/['"\,]/g,"").replace(/\s/g,"_").toLocaleLowerCase();if(!e[s]){warns[s]={message:`Font family not found ${s}`},o.push(`brz-ff-${r}`,"brz-ft-upload");break}o.push(`brz-ff-${e[s]}`,"brz-ft-upload");break;case"font-weight":o.push(`brz-fw-lg-${i}`);break;case"text-align":o.push(`brz-text-lg-${textAlign[i]||"left"}`);break;case"letter-spacing":let l=O(`${i}`);o.push(`brz-ls-lg-${l}`);break;case"line-height":let u=`${t["font-size"]}`.replace("px",""),N=C(`${i}`,u);o.push(`brz-lh-lg-${N}`);break;default:break}}),o};function rt(t,e,r){t=Math.min(255,Math.max(0,Math.round(t))),e=Math.min(255,Math.max(0,Math.round(e))),r=Math.min(255,Math.max(0,Math.round(r)));let o=t.toString(16).padStart(2,"0"),n=e.toString(16).padStart(2,"0"),i=r.toString(16).padStart(2,"0");return`#${o}${n}${i}`.toUpperCase()}var f=t=>{let e=t.slice(4,-1).split(",").map(r=>parseInt(r.trim()));if(e.length===3)return rt(e[0],e[1],e[2])};function w(t,e){let r=e.tagName==="A";return{bgColorHex:f(t["background-color"])??"#ffffff",bgColorOpacity:+t.opacity,bgColorType:"solid",colorHex:f(t.color)??"#ffffff",colorOpacity:1,text:"text"in e?e.text:void 0,...r&&{linkExternal:"href"in e?e.href:"",linkType:"external",linkExternalBlank:"on"}}}var g=["P","H1","H2","H3","H4","H5","H6","UL","OL","LI"],v=["UL","OL"],y=["font-size","font-family","font-weight","text-align","letter-spacing","text-transform"],h={"-webkit-center":"center","-moz-center":"center",start:"left",end:"right",left:"left",right:"right",center:"center",justify:"justify"};function P(t,e){let r=g.includes(t.tagName);return r&&e?!e.includes(t.tagName):r}function m(t){if(!t.parentElement)return;let e=window.getComputedStyle(t.parentElement).display;return e==="block"||e==="flex"||e==="grid"?t.parentElement:m(t.parentElement)}function E(t,e){let r=m(t);if(!r){console.error("No block-level parent found.");return}let o=Array.from(e.children),n=0,i=0;if(e.contains(r)&&(n=o.length,i=o.indexOf(r)),i===-1){console.error("Element is not a child of its parent.");return}return i===0?"top":i===n-1?"bottom":"middle"}var c=t=>{let e=window.getComputedStyle(t),r={};return Object.values(e).forEach(o=>{r[o]=e.getPropertyValue(o)}),r};function p(t){let e=t.parentElement;t.remove(),e?.childNodes.length===0&&p(e)}function R(t){let e=t.querySelectorAll(".sites-button"),r=new Map;return e.forEach(o=>{let n=E(o,t),i=m(o),s=c(o),l=w(s,o),a=r.get(i)??{items:[]};r.set(i,{...a,position:n,align:h[s["text-align"]],items:[...a.items,l]})}),e.forEach(p),t}var S=t=>{let e=["brz-"];t.querySelectorAll("[class]").forEach(function(o){o.classList.forEach(n=>{e.some(i=>n.startsWith(i))||(n==="finaldraft_placeholder"&&(o.innerHTML=""),o.classList.remove(n))}),o.classList.length===0&&o.removeAttribute("class")})};function ot(t){var e=document.createElement("div");e.innerHTML=t;var r=e.querySelectorAll("[style]");return r.forEach(function(o){for(var n=o.getAttribute("style")??"",i=n.split(";"),s="",l=0;l<i.length;l++){var a=i[l].trim();(a.startsWith("font-weight")||a.startsWith("color"))&&(s+=a+"; ")}o.setAttribute("style",s)}),S(e),e.innerHTML}function W(t){let e=t.querySelectorAll(g.join(",")+"[style]"),r=t.querySelectorAll(g.join(",")+"[class]");return e.forEach(function(o){o.removeAttribute("style")}),S(t),t.innerHTML=ot(t.innerHTML),t}function _(t){return t.querySelectorAll("div").forEach(function(r){let o=document.createElement("p");for(let n=0;n<r.attributes.length;n++){let i=r.attributes[n];o.setAttribute(i.name,i.value)}o.innerHTML=r.innerHTML,r.parentNode?.replaceChild(o,r)}),t}var nt=t=>crypto.getRandomValues(new Uint8Array(t)),it=(t,e,r)=>{let o=(2<<Math.log(t.length-1)/Math.LN2)-1,n=-~(1.6*o*e/t.length);return(i=e)=>{let s="";for(;;){let l=r(n),a=n;for(;a--;)if(s+=t[l[a]&o]||"",s.length===i)return s}}},A=(t,e=21)=>it(t,e,nt);var st="abcdefghijklmnopqrstuvwxyz",lt="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_",x=(t=12)=>A(st,1)()+A(lt,t)(t-1);function $(t){let e=t.querySelectorAll(".embedded-paste"),r=[];return e.forEach(o=>{r.push({type:"EmbedCode",value:{_id:x(),code:o.outerHTML}}),o.remove()}),{node:t,models:r}}function z(t,e){let r=e.parentElement,o=r?.tagName==="A"||e.tagName==="A",n=r?f(c(r)["background-color"]):void 0,i=r&&"href"in r?r.href:"";return{colorHex:f(t.color)??"#ffffff",colorOpacity:+t.opacity,...o&&{linkExternal:i??("href"in e?e.href:""),linkType:"external",linkExternalBlank:"on",...n&&{bgColorHex:n}}}}function T(t){return t.nodeType===Node.TEXT_NODE?t.parentNode??void 0:Array.from(t.childNodes).find(e=>T(e))}function D(t){let e=t.querySelectorAll(`[data-socialicon],[style*="font-family: 'Mono Social Icons Font'"]`),r=new Map;return e.forEach(o=>{let n=E(o,t),i=m(o),s=T(o),a=s.nodeName==="#text"?o:s,u=c(a),N={...z(u,o),iconCode:a.textContent.charCodeAt(0)},d=r.get(i)??{items:[]};r.set(i,{...d,position:n,align:h[u["text-align"]],items:[...d.items,N]})}),e.forEach(p),t}var B=y;function F(t){if(t.nodeType===Node.TEXT_NODE){let e=t.parentElement;if(!e)return;if(e.tagName==="SPAN"){let n=t.parentElement.parentElement,i=t.parentElement,s=i.style;if(B.includes("text-transform")&&!s?.textTransform&&c(i)["text-transform"]==="uppercase"&&i.classList.add("brz-capitalize-on"),!n)return;if(!s?.color){let l=c(n);i.style.color=l.color}if(!s?.fontWeight&&n.style?.fontWeight&&(i.style.fontWeight=n.style.fontWeight),n.tagName==="SPAN"){let l=i.style.fontWeight;i.style.fontWeight=l||getComputedStyle(i).fontWeight}return}let r=document.createElement("span"),o=window.getComputedStyle(e);B.includes("text-transform")&&o.textTransform==="uppercase"&&r.classList.add("brz-capitalize-on"),o.color&&(r.style.color=o.color),o.fontWeight&&(r.style.fontWeight=o.fontWeight),r.textContent=t.textContent,e.tagName==="U"&&(t.parentElement.style.color=o.color),t&&t.parentElement.replaceChild(r,t)}else if(t.nodeType===Node.ELEMENT_NODE){let e=t.childNodes;for(let r=0;r<e.length;r++)F(e[r])}}function I(t){return t.childNodes.forEach(e=>{F(e)}),t}var L=t=>{let e=[];if(t.nodeType===Node.TEXT_NODE)t.parentElement&&e.push(t.parentElement);else for(let r=0;r<t.childNodes.length;r++){let o=t.childNodes[r];o&&(e=e.concat(L(o)))}return e};function V(t){return L(t).reduce((r,o)=>{let n=c(o);return n.display==="inline"&&delete n["text-align"],{...r,...n}},{})}function q(t){let e=c(t);e.display==="inline"&&delete e["text-align"];let r=V(t);return{...e,...r,"line-height":e["line-height"]}}function M(t){let e=[];if(P(t,v)){let r=`uid-${Math.random()}-${Math.random()}`;t.setAttribute("data-uid",r),e.push({uid:r,tagName:t.tagName,styles:q(t)})}for(let r=0;r<t.childNodes.length;r++){let o=t.childNodes[r];e=e.concat(M(o))}return e}var j=t=>M(t).map(r=>{let{styles:o}=r;return{...r,styles:y.reduce((n,i)=>(n[i]=o[i],n),{})}});var at=t=>{let{node:e,styles:r,families:o,defaultFamily:n}=t;return r.map(i=>{let s=H(i.styles,o,n),l=e.querySelector(`[data-uid='${i.uid}']`);l&&(l.classList.add(...s),l.removeAttribute("data-uid"))}),e.innerHTML},J=t=>{let e=document.querySelector(t.selector);if(!e)return JSON.stringify({error:`Element with selector ${t.selector} not found`});if(e=e.children[0],!e)return JSON.stringify({error:`Element with selector ${t.selector} has no wrapper`});let r=[];e=D(e),e=R(e),e=$(e).node,e=_(e),e=I(e),e=W(e);let n={node:e,families:t.families,defaultFamily:t.defaultFamily,styles:j(e)};return r.push({type:"Text",value:{_id:x(),text:at(n)}}),JSON.stringify({data:r})};var U=()=>{try{return{selector:"{{selector}}",families:JSON.parse("{{families}}"),defaultFamily:"{{defaultFamily}}"}}catch(t){let r={selector:".my-div",families:{lato:"uid_for_lato",roboto:"uid_for_roboto"},defaultFamily:"lato"};throw new Error(JSON.stringify({error:`Invalid JSON ${t}`,details:`Must be: ${JSON.stringify(r)}`}))}};var ct=U(),mt=J(ct),ft=mt;return Z(pt);})();
