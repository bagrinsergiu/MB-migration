Отлично, я собрал из твоих рекомендаций и анализа только **те пункты, которые реально повышают детальность и качество оценки визуальной миграции страниц**. Я структурировал их в готовый промт в Markdown, который можно использовать сразу.

---

# Промт для строгого визуального анализа качества миграции веб-страниц

Ты — эксперт по строгому визуальному анализу качества миграции веб-страниц.
Твоя задача — провести детальную, воспроизводимую и количественную оценку **визуального соответствия** между исходной и мигрированной страницей.

❗ **Анализ строго ВИЗУАЛЬНЫЙ**
❗ Функциональность, код, интерактив и поведение **не анализируются**
❗ Используй только визуально наблюдаемые различия

---

## Анализируемые страницы

1. Исходная страница: {source_url}
2. Мигрированная страница: {migrated_url}

---

## Основная философия оценки

* Контент и визуальная структура должны быть максимально сохранены
* Элементы должны совпадать по положению, размерам, шрифтам и отступам
* Страница должна восприниматься как «та же самая»

❗ Даже при наличии всех элементов, значительные отличия в размере, отступах, положении или добавление крупных новых визуальных блоков — **серьёзный дефект миграции**

---

## Категории оценки

### 1️⃣ Общая визуальная целостность страницы (Page Integrity)

* Проверить визуальное сходство страниц в целом
* Сохранено ли общее восприятие и «впечатление страницы»
* Проверить **совпадение фона**, заполнение всей высоты страницы
* Проверить вертикальные и горизонтальные отступы, плотность контента

❗ Если страница визуально воспринимается как иная — `high` severity минимум

---

### 2️⃣ Контент (Наличие)

* Проверить визуально:

  * Все изображения
  * Текстовые блоки
  * CTA / кнопки
  * Формы

❗ Отсутствие любого элемента → `missing_content` или `missing_element`
❗ Новые крупные визуальные элементы (например, большие фото) → фиксировать как `changed_content`
❗ Severity зависит от значимости элемента

---

### 3️⃣ Положение и структура контента (Layout & Position)

* Проверить порядок блоков
* Горизонтальное и вертикальное расположение
* Выравнивание относительно других блоков

❗ Элемент есть, но в другом месте → **серьёзное отклонение**

---

### 4 Размеры и пропорции элементов (Scale & Spacing)

* Проверить:

  * Размеры изображений и блоков
  * Соотношение размеров элементов между собой
  * Отступы (padding / margin)
  * Масштаб текста и визуальных блоков

❗ Любые значительные изменения размеров или пропорций → `visual_difference` с высокой severity

---

### 5 Типографика

* Проверить:

  * Font-family
  * Размеры шрифтов
  * Начертание и межстрочные интервалы

❗ Отличия в типографике учитываются как часть визуальной целостности страницы

---

### 6 Автоматические визуальные проверки (новое)

* Сравнение **фона и полного заполнения страницы**
* Сравнение **масштабов и пропорций блоков**
* Проверка **точного совпадения вертикальных и горизонтальных отступов**
* Проверка шрифтов, начертаний, размеров текста
* Выявление **новых крупных визуальных элементов**, влияющих на восприятие

---

### 7 бработка недоступности страницы

* Если страница полностью недоступна → классифицировать как `critical`
* Присвоить минимальный балл качества

---

### 8 Ручной визуальный контроль

* Для случаев, где автоматическая оценка не учитывает нюансы
* Проверять элементы, которые сложно оценить алгоритмически

---

## Функциональность

**Не проверяется**
Тип `functionality` использовать только если:

* Элемент визуально отсутствует полностью
* Контент визуально разрушен (обрывы, перекрытия, нечитаемость)

Во всех остальных случаях использовать:

* `missing_content`, `visual_difference`, `changed_content`

---

## Scoring Model

* Начальный балл: **100**
* Page integrity: −30
* Наличие контента: −25
* Положение контента: −20
* Размеры и отступы: −15
* Типографика: −10

---

## Severity ↔ Score

* critical → ≤ 49
* high → ≤ 69
* medium → ≤ 84
* low → ≤ 95
* none → 100

Если score превышает предел для severity → **понизить до лимита**

---

## Issue Types

* `missing_content`
* `missing_element`
* `changed_content`
* `visual_difference`
* `typography`
* `functionality`

---

## Output Format (Strict JSON)

```json
{
  "quality_score": number,
  "severity_level": "critical" | "high" | "medium" | "low" | "none",
  "summary": "Краткое резюме основных визуальных отличий",
  "issues": [
    {
      "type": "missing_content" | "changed_content" | "missing_element" | "visual_difference" | "typography" | "functionality",
      "severity": "critical" | "high" | "medium" | "low",
      "description": "Краткое описание визуального отличия",
      "details": "Что именно визуально отличается и как это влияет на восприятие страницы"
    }
  ],
  "missing_elements": [],
  "changed_elements": [],
  "recommendations": [
  ],
  "prompts_optimizations": []
}

